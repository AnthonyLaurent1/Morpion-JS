
================================================================================
File: models/Game.js
Size: 560 B
================================================================================

import { parties } from '../server'

class Game {
  constructor() {
    this.gameId = randomInt(1000, 9999);
    this.players = [];
    this.grid = generateGrid();
    parties.set(this.gameId, this)
  }

  randomInt = (min, max) => {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  };

  generateGrid = () => {
    const grille = [];
    for (let ligne = 0; ligne < 5; ligne++) {
      const row = [];
      for (let colonne = 0; colonne < 5; colonne++) {
        row.push(null);
      }
      grille.push(row);
    }
    return grille;
  };
}


================================================================================
File: models/Player.js
Size: 1.1 kB
================================================================================

import { parties } from '../server'

export default class Player{
    constructor(){
        this.playerId = randomint(10000,99999)
        this.presentGame = null
        this.placeActive = true
        this.destroyActive = true 
        this.color = red
    }

    randomInt = (min, max) => {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    join_a_game = (gameId) => {
        if(gameId){
            try{        
                this.presentGame = parties.get(gameId)
                this.presentGame.players.push(this)
            } catch(error) {
                console.error(error)
            }
        }
    }

    place_a_block = (x,y) => {
        if (placeActive){
            if(this.presentGame.grid[x, y] == null){
                this.presentGame.grid[x, y] = this.color
                this.placeActive = false
            }
        }
    }

    destroy_a_block = (x, y) => {
        if(destroyActive && this.presentGame.grid[x, y] != null) {
            this.presentGame.grid[x, y] = null 
            this.destroyActive = false 
        }
    }


}

================================================================================
File: models/classes/Bombman.js
Size: 84 B
================================================================================

import Player from '../Player'

export default class Bombman extends Player {
    
}

================================================================================
File: server.js
Size: 432 B
================================================================================

import { Server } from socket.io 
import express from express 
import http from http 
import cors from cors 

const app = express()
app.use(cors())
app.use(express.json())

const server = http.createServer(app)
const io = new Server( server, { cors : { origin : "*"}})

const PORT = 8080
const DUREE_MAX_VAGUE = 60

export const parties = new Map()

server.listent(PORT, 
    () => { console.log("Serveur lanc√© sur port" , PORT)}
)
